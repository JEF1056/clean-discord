# Clean-Discord
clean-discord is a fast, efficient, and robust script for cleaning large quantities of messages from discord data generated by [DiscordChatExporter](https://github.com/Tyrrrz/DiscordChatExporter). Its average processing rate is ~300k messages per 50 seconds (including detoxifying) while only consuming about 1gb of memory.

## Cleaning the data
The process of cleaning the data includes removing a lot of the issues that can be found in discord chat logs, including:
- Translating "special" unicode-based characters into the english alphabet (text like `T“âo“âX“âi“âC“â` to `ToXiC`)
- Converting excessive spaces and unicode spaces to traditional spaces (text like `hi  		, you!` to `hi, you`)
- Replace users who left the the server(s) without being properly cached (they show up as `Deleted User`) with a random [name](./src/names.txt) that is attached to their id (names like `@Deleted User` to `@Jake`)
- Fixing excessive punctuation or spelling with certain limits (to keep ellipsis, for example) (text like `REEEEEEEEEEEEEEE..........` to `REEE...`)
- Filtering non-ascii characters and commonly used characters for ascii/unicode art (but keeping enough to make the vast majority of messages look ok) (text like `üñäÔ∏èi like to write <üñäÔ∏è>` to `i like to write`)
- Converting [supported emojis](./src/emojis.json) to their shorthand form (`üòÇ` to `:joy:`,)
- Removing multiline code blocks while only removing the ticks around the single line code blocks (removing text like <code>`</code><code>``text```</code>)
- Replacing newlines with an escaped newline (`hi\nhow are you?` to `hi\\nhow are you?`)
- Merging multi-message, single-author continutous messages into a single message merged with escaped newlines
- Removing URLs (like `https://jadeai.ml`)
- Removing emails (like `contact@j-fan.ml`)
- Removing phone numbers (like `+1 (123) 456-7890`)
- Removing custom emojis (like `:pogchamp:`)
